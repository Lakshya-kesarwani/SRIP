{% extends "base.html" %}
{% block title %}Prospective Intern Registration{% endblock %}
{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow mb-4">
            <div class="card-header bg-primary text-white">
                <h3 class="card-title mb-0 text-center">Prospective Intern Registration</h3>
            </div>
            <div class="card-body p-4">
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                                {{ message }}
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
                
                <form method="POST" action="/auth/register?type=intern" class="needs-validation" novalidate>
                    <!-- Personal Information Section -->
                    <fieldset class="mb-4">
                        <legend class="h5 text-primary">Personal Information</legend>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="full_name" class="form-label">Full Name*</label>
                                <input type="text" class="form-control" id="full_name" name="full_name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">Email Address*</label>
                                <input type="email" class="form-control" id="email" name="email" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="password" class="form-label">Password*</label>
                                <input type="password" class="form-control" id="password" name="password" required>
                                <div class="form-text">Password must be at least 8 characters long</div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="date_of_birth" class="form-label">Date of Birth*</label>
                                <input type="date" class="form-control" id="date_of_birth" name="date_of_birth" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="gender" class="form-label">Gender*</label>
                                <select class="form-select" id="gender" name="gender" required>
                                    <option value="" selected disabled>Select Gender</option>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                    <option value="Other">Other</option>
                                    <option value="Prefer not to say">Prefer not to say</option>
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="nationality" class="form-label">Nationality*</label>
                                <input type="text" class="form-control" id="nationality" name="nationality" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="permanent_city" class="form-label">Permanent City*</label>
                                <input type="text" class="form-control" id="permanent_city" name="permanent_city" required>
                            </div>
                        </div>
                    </fieldset>
                    
                    <!-- Contact Information Section -->
                    <fieldset class="mb-4">
                        <legend class="h5 text-primary">Contact Information</legend>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="mobile" class="form-label">Mobile Number*</label>
                                <input type="text" class="form-control" id="mobile" name="mobile" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="phone" class="form-label">Alternative Phone</label>
                                <input type="text" class="form-control" id="phone" name="phone">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="alternate_email" class="form-label">Alternate Email</label>
                                <input type="email" class="form-control" id="alternate_email" name="alternate_email">
                            </div>
                        </div>
                    </fieldset>
                    
                    <!-- Education Information Section -->
                    <fieldset class="mb-4">
                        <legend class="h5 text-primary">Education Information</legend>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="degree" class="form-label">Degree*</label>
                                <input type="text" class="form-control" id="degree" name="degree" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="department" class="form-label">Department*</label>
                                <input type="text" class="form-control" id="department" name="department" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-8 mb-3">
                                <label for="college_name" class="form-label">College/University Name*</label>
                                <input type="text" class="form-control" id="college_name" name="college_name" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="year_of_joining" class="form-label">Year of Joining*</label>
                                <input type="number" class="form-control" id="year_of_joining" name="year_of_joining" min="2000" max="2030" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="college_city" class="form-label">College City*</label>
                                <input type="text" class="form-control" id="college_city" name="college_city" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="college_state" class="form-label">College State*</label>
                                <input type="text" class="form-control" id="college_state" name="college_state" required>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="college_country" class="form-label">College Country*</label>
                                <input type="text" class="form-control" id="college_country" name="college_country" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="gpa_type" class="form-label">GPA Type*</label>
                                <select class="form-select" id="gpa_type" name="gpa_type" required>
                                    <option value="" selected disabled>Select GPA Type</option>
                                    <option value="CGPA (10.0)">CGPA (10.0)</option>
                                    <option value="CGPA (4.0)">CGPA (4.0)</option>
                                    <option value="Percentage">Percentage</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="gpa_value" class="form-label">GPA Value*</label>
                                <input type="number" step="0.01" class="form-control" id="gpa_value" name="gpa_value" required>
                            </div>
                        </div>
                    </fieldset>
                    
                    <div class="d-grid gap-2 mt-4">
                        <button type="submit" class="btn btn-primary btn-lg">Register</button>
                    </div>
                    <div class="mt-3 text-center">
                        <small class="text-muted">Fields marked with * are required</small>
                    </div>
                </form>
            </div>
            <div class="card-footer text-center">
                <p class="mb-0">Already have an account? <a href="/auth/intern" class="text-primary">Login here</a></p>
            </div>
        </div>
    </div>
</div>

<!-- Form validation script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    'use strict';
    
    // Fetch all forms that we want to apply validation styles to
    var forms = document.querySelectorAll('.needs-validation');
    
    // Loop over them and prevent submission if invalid
    Array.from(forms).forEach(function(form) {
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            form.classList.add('was-validated');
        }, false);
    });
});
</script>
{% endblock %}
